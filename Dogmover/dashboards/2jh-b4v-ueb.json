{
    "author_handle": "dweinand@joinhandshake.com",
    "author_name": "Dan Weinand",
    "created_at": "2022-03-08T18:58:01.640829+00:00",
    "description": "Managed through the terraform-datadog repo. Any changes made manually must be copied over to the repo, else the changes will be overridden the next time a terraform plan from said repo is applied.",
    "id": "2jh-b4v-ueb",
    "is_read_only": false,
    "layout_type": "ordered",
    "modified_at": "2022-08-26T16:56:37.998252+00:00",
    "notify_list": [],
    "reflow_type": "auto",
    "restricted_roles": [],
    "template_variable_presets": [],
    "template_variables": [
        {
            "default": "production",
            "name": "env",
            "prefix": "env"
        },
        {
            "default": "production",
            "name": "cluster",
            "prefix": "cluster-name"
        },
        {
            "default": "us-central1",
            "name": "region",
            "prefix": "region"
        }
    ],
    "title": "Session Service",
    "url": "/dashboard/2jh-b4v-ueb/session-service",
    "widgets": [
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Ambassador Auth API",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "events": [
                                {
                                    "q": "tags:deploy:true,environment:production",
                                    "tags_execution": "and"
                                }
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "on_right_yaxis": false,
                                    "q": "p99:trace.http.request{$env,service:session-service}, p95:trace.http.request{$env,service:session-service}"
                                }
                            ],
                            "show_legend": true,
                            "title": "http request duration p99 / p95",
                            "type": "timeseries"
                        },
                        "id": 6435202912638960
                    },
                    {
                        "definition": {
                            "events": [
                                {
                                    "q": "tags:deploy:true,environment:production",
                                    "tags_execution": "and"
                                }
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "on_right_yaxis": false,
                                    "q": "max:trace.http.request{$env,service:session-service}"
                                }
                            ],
                            "show_legend": true,
                            "title": "http request duration max",
                            "type": "timeseries"
                        },
                        "id": 6115832185486272
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "sum:session_service.auth.attempts{$env}.as_count(), sum:session_service.auth.failed{$env}.as_count()",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Service attempts/failed",
                            "type": "timeseries"
                        },
                        "id": 6994565764659228
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "sum:session_service.auth.errored{$env}.as_count()",
                                    "style": {
                                        "palette": "red"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Service errors",
                            "type": "timeseries"
                        },
                        "id": 5606318941514246
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "avg:session_service.auth.denied{$env}.as_count()",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Service denied auth",
                            "type": "timeseries"
                        },
                        "id": 3471959986040768
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "sum:envoy.cluster.cluster_handshake_web_service_handshake.ext_authz.denied{$cluster}.as_count(), sum:envoy.cluster.cluster_handshake_web_service_handshake.ext_authz.error{$cluster}.as_count()",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Authz errors/denied",
                            "type": "timeseries"
                        },
                        "id": 6386664232319380
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "sum:session_service.token.none{$env}.as_count(), sum:session_service.token.expired{$env}.as_count(), sum:session_service.token.marshalled{$env}.as_count()",
                                    "style": {
                                        "palette": "cool"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Service tokens",
                            "type": "timeseries"
                        },
                        "id": 6353378472096856
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "on_right_yaxis": false,
                                    "q": "sum:kubernetes.cpu.usage.total{kube_deployment:session-service,$cluster}, sum:kubernetes.cpu.limits{kube_deployment:session-service,$cluster}"
                                }
                            ],
                            "show_legend": true,
                            "title": "Pods CPU",
                            "type": "timeseries"
                        },
                        "id": 1656339910547258
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "q": "avg:envoy.cluster.cluster_extauth_session_service_api_session_service_3000.upstream_rq_3xx{$cluster}.as_count(), avg:envoy.cluster.cluster_extauth_session_service_api_session_service_3000.upstream_rq_4xx{$cluster}.as_count(), avg:envoy.cluster.cluster_extauth_session_service_api_session_service_3000.upstream_rq_5xx{$cluster}.as_count()"
                                }
                            ],
                            "show_legend": true,
                            "title": "Envoy HTTP 3XX, 4XX, 5XX",
                            "type": "timeseries"
                        },
                        "id": 11308411401326
                    },
                    {
                        "definition": {
                            "events": [
                                {
                                    "q": "tags:deploy:true,environment:production",
                                    "tags_execution": "and"
                                }
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "on_right_yaxis": false,
                                    "q": "max:envoy.cluster.cluster_extauth_session_service_api_session_service_3000.internal.upstream_rq_time.95percentile{$cluster}"
                                }
                            ],
                            "show_legend": true,
                            "title": "Envoy AuthService latency",
                            "type": "timeseries"
                        },
                        "id": 6916473602929887
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:session_service.token.malformed{$env}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:session_service.token.invalid_payload{$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Malformed tokens count",
                            "type": "timeseries"
                        },
                        "id": 3218720492415048
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "value",
                                "avg",
                                "sum",
                                "min",
                                "max"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:session_service.token.decrypt.success{$env,version:legacy_mobile}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:session_service.token.decrypt.success{$env,version:legacy_web}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "sum:session_service.token.decrypt.success{$env,version:v2}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Succesfully Decrypted Tokens Count",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 3910625025973089
                    }
                ]
            },
            "id": 2083457791495884
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "REST API",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "events": [
                                {
                                    "q": "tags:deploy:true,environment:production",
                                    "tags_execution": "and"
                                }
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p99:trace.http.request{$env,service:session-service-rest-api}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.http.request{$env,service:session-service-rest-api}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "http request duration p99 / p95 $env",
                            "type": "timeseries"
                        },
                        "id": 1183792625794721
                    }
                ]
            },
            "id": 8086829296565210
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "REST API Kubernetes Health",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query0"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "max:kubernetes_state.hpa.desired_replicas{$cluster,hpa:session-service-rest-api-autoscaler}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dashed",
                                        "palette": "grey"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query0"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "max:kubernetes_state.hpa.max_replicas{hpa:session-service-rest-api-autoscaler,$cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dashed",
                                        "palette": "warm"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:kubernetes_state.hpa.current_replicas{hpa:session-service-rest-api-autoscaler,$cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "HPA Replicas $cluster",
                            "type": "timeseries"
                        },
                        "id": 7880899352063246
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:kubernetes.cpu.requests{$cluster,kube_deployment:session-service-rest-api}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:kubernetes.cpu.usage.total{$cluster,kube_deployment:session-service-rest-api}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:kubernetes.cpu.limits{$cluster,kube_deployment:session-service-rest-api}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Avg CPU Usage $cluster",
                            "type": "timeseries"
                        },
                        "id": 87511077773849
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:kubernetes.memory.requests{$cluster,kube_deployment:session-service-rest-api}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:kubernetes.memory.usage{$cluster,kube_deployment:session-service-rest-api}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:kubernetes.memory.limits{$cluster,kube_deployment:session-service-rest-api}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Avg Memory Usage $cluster",
                            "type": "timeseries"
                        },
                        "id": 5168828671261113
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:kubernetes_state.container.restarts{$cluster,kube_container_name:session-service-rest-api} by {pod}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Container Restarts by Pod $cluster",
                            "type": "timeseries"
                        },
                        "id": 4443486575167016
                    }
                ]
            },
            "id": 8222327049026491
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Redis",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:gcp.redis.keyspace.keys{instance_id:projects/handshake-production/locations/us-central1/instances/session-service-discrete-roughy}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "max:gcp.redis.keyspace.keys{instance_id:projects/handshake-staging/locations/us-central1/instances/session-service-expert-impala}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "type": "timeseries"
                        },
                        "id": 904879412011615
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gcp.redis.stats.cpu_utilization{instance_id:projects/handshake-demo/locations/us-central1/instances/session-service-crisp-alpaca OR instance_id:projects/handshake-staging/locations/us-central1/instances/session-service-expert-impala OR instance_id:projects/handshake-production/locations/us-central1/instances/session-service-discrete-roughy OR instance_id:projects/handshake-uk-staging/locations/europe-west2/instances/session-service-gorgeous-jaguar OR instance_id:projects/handshake-uk-production/locations/europe-west2/instances/session-service-selected-tetra} by {instance_id,role,node_id}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "CPU Utilization",
                            "type": "timeseries"
                        },
                        "id": 4980082124361408
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gcp.redis.stats.network_traffic{instance_id:projects/handshake-demo/locations/us-central1/instances/session-service-crisp-alpaca OR instance_id:projects/handshake-production/locations/us-central1/instances/session-service-discrete-roughy OR instance_id:projects/handshake-staging/locations/us-central1/instances/session-service-expert-impala OR instance_id:projects/handshake-uk-staging/locations/europe-west2/instances/session-service-gorgeous-jaguar OR instance_id:projects/handshake-uk-production/locations/europe-west2/instances/session-service-selected-tetra} by {instance_id,role}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Network Traffic",
                            "type": "timeseries"
                        },
                        "id": 3139804304802807
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "formula": "derivative(query1)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:gcp.redis.keyspace.keys{instance_id:projects/handshake-staging/locations/us-central1/instances/session-service-expert-impala OR instance_id:projects/handshake-production/locations/us-central1/instances/session-service-discrete-roughy OR instance_id:projects/handshake-uk-staging/locations/europe-west2/instances/session-service-gorgeous-jaguar} by {instance_id}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Total Keys Rate of Change",
                            "type": "timeseries"
                        },
                        "id": 1284938444604829
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:session_service_rest_api.redis.session.save.success{$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Save $env",
                            "type": "timeseries"
                        },
                        "id": 4679106218720136
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:session_service_rest_api.redis.session.delete.invalid_key{$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "red"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Session Delete $env",
                            "type": "timeseries"
                        },
                        "id": 6580573278174556
                    }
                ]
            },
            "id": 3369650920793380
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Redis Health",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "alert_id": "45638889",
                            "title": "Redis CPU Usage",
                            "type": "alert_graph",
                            "viz_type": "timeseries"
                        },
                        "id": 2307088763958380
                    },
                    {
                        "definition": {
                            "alert_id": "45638670",
                            "title": "Redis Memory Usage",
                            "type": "alert_graph",
                            "viz_type": "timeseries"
                        },
                        "id": 3631042257453722
                    },
                    {
                        "definition": {
                            "alert_id": "45639398",
                            "title": "Connections Rejected",
                            "type": "alert_graph",
                            "viz_type": "timeseries"
                        },
                        "id": 6585520004194337
                    },
                    {
                        "definition": {
                            "alert_id": "45639485",
                            "title": "System Memory Usage",
                            "type": "alert_graph",
                            "viz_type": "timeseries"
                        },
                        "id": 3495647641162815
                    },
                    {
                        "definition": {
                            "alert_id": "45639595",
                            "title": "System Memory Overload Duration",
                            "type": "alert_graph",
                            "viz_type": "timeseries"
                        },
                        "id": 355854819145402
                    },
                    {
                        "definition": {
                            "autoscale": false,
                            "precision": 2,
                            "requests": [
                                {
                                    "aggregator": "avg",
                                    "conditional_formats": [
                                        {
                                            "comparator": "<=",
                                            "hide_value": false,
                                            "palette": "white_on_green",
                                            "value": 0
                                        },
                                        {
                                            "comparator": ">",
                                            "hide_value": false,
                                            "palette": "white_on_red",
                                            "value": 0
                                        }
                                    ],
                                    "q": "avg:gcp.redis.stats.memory.system_memory_overload_duration{project_id:handshake-production,*,$region,instance_id:projects/handshake-production/locations/us-central1/instances/session-service-discrete-roughy} by {instance_id}"
                                }
                            ],
                            "title": "System Memory Overload Duration",
                            "type": "query_value"
                        },
                        "id": 4790143980656476
                    }
                ]
            },
            "id": 7541910590496669
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Access Miniservice",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "default_zero(query1)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.create_session.hits{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.create_session.errors{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Create Session RPS in $env",
                            "type": "timeseries"
                        },
                        "id": 1348504777921075
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.create_session.errors{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.create_session.hits{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Create Session Requests & Errors in $env",
                            "type": "timeseries"
                        },
                        "id": 2715760944276127
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "max",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p50",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p75",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p90",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p95",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p99",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p99:trace.create_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Create Session Latency in $env",
                            "type": "timeseries"
                        },
                        "id": 2269928508123881
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "default_zero(query1)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_session.hits{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_session.errors{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete Session RPS in $env",
                            "type": "timeseries"
                        },
                        "id": 3006501955857623
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_session.errors{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_session.hits{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete Session Requests & Errors in $env",
                            "type": "timeseries"
                        },
                        "id": 3185800637835459
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "max",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p50",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p75",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p90",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p95",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p99",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p99:trace.delete_session{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete Session Latency in $env",
                            "type": "timeseries"
                        },
                        "id": 3603490126037649
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "default_zero(query1)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_all_sessions_for_user.hits{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_all_sessions_for_user.errors{service:handshake-access,$env}.as_rate()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete All For User RPS in $env",
                            "type": "timeseries"
                        },
                        "id": 5987391790525808
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_all_sessions_for_user.errors{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "warm"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.delete_all_sessions_for_user.hits{service:handshake-access,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete All For User Requests & Errors in $env",
                            "type": "timeseries"
                        },
                        "id": 6740465433677670
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "max",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p50",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p75",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p90",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p95",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "p99",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p99:trace.delete_all_sessions_for_user{service:handshake-access,$env}"
                                        }
                                    ],
                                    "response_format": "timeseries"
                                }
                            ],
                            "show_legend": true,
                            "title": "Delete All For User Latency in $env",
                            "type": "timeseries"
                        },
                        "id": 4307496236086025
                    },
                    {
                        "definition": {
                            "background_color": "white",
                            "content": "**These metrics come from the Access miniservice**",
                            "font_size": "14",
                            "has_padding": true,
                            "show_tick": false,
                            "text_align": "left",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 630996190150448
                    }
                ]
            },
            "id": 7787622459567531
        }
    ]
}