{
    "author_handle": "scott@joinhandshake.com",
    "author_name": "Scott Ringwelski",
    "created_at": "2019-08-13T20:24:36.378441+00:00",
    "description": "",
    "id": "xrd-nsv-8px",
    "is_read_only": false,
    "layout_type": "ordered",
    "modified_at": "2022-08-23T17:32:10.916162+00:00",
    "notify_list": [],
    "reflow_type": "auto",
    "restricted_roles": [],
    "template_variable_presets": [
        {
            "name": "Admin Production",
            "template_variables": [
                {
                    "name": "cluster",
                    "value": "admins"
                },
                {
                    "name": "priority",
                    "value": "*"
                },
                {
                    "name": "index",
                    "value": "*"
                },
                {
                    "name": "env",
                    "value": "production"
                },
                {
                    "name": "region",
                    "value": "us-central1"
                },
                {
                    "name": "cluster_deployment",
                    "value": "*"
                },
                {
                    "name": "source",
                    "value": "*"
                }
            ]
        },
        {
            "name": "Employer Production",
            "template_variables": [
                {
                    "name": "cluster",
                    "value": "employers"
                },
                {
                    "name": "env",
                    "value": "production"
                }
            ]
        },
        {
            "name": "Student Production",
            "template_variables": [
                {
                    "name": "cluster",
                    "value": "students"
                },
                {
                    "name": "env",
                    "value": "production"
                }
            ]
        },
        {
            "name": "student UK production",
            "template_variables": [
                {
                    "name": "cluster",
                    "value": "students"
                },
                {
                    "name": "env",
                    "value": "production"
                },
                {
                    "name": "region",
                    "value": "europe-west2"
                }
            ]
        },
        {
            "name": "universities prod",
            "template_variables": [
                {
                    "name": "cluster",
                    "value": "universities"
                },
                {
                    "name": "env",
                    "value": "production"
                }
            ]
        }
    ],
    "template_variables": [
        {
            "available_values": [],
            "default": "*",
            "name": "cluster",
            "prefix": "cluster"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "priority",
            "prefix": "priority"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "index",
            "prefix": "index"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "env",
            "prefix": "env"
        },
        {
            "available_values": [],
            "default": "us-central1",
            "name": "region",
            "prefix": "region"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "cluster_deployment",
            "prefix": "cluster_deployment"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "source",
            "prefix": "source"
        }
    ],
    "title": "[Elasticsearch] Indexing System",
    "url": "/dashboard/xrd-nsv-8px/elasticsearch-indexing-system",
    "widgets": [
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Pub/Sub",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        },
                                        {
                                            "formula": "query5"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:gcp.pubsub.subscription.num_unacked_messages_by_region{subscription_id:posting-reindex,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:gcp.pubsub.subscription.num_unacked_messages_by_region{subscription_id:employer-reindex-green,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "sum:gcp.pubsub.subscription.num_unacked_messages_by_region{subscription_id:university-reindex,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "sum:gcp.pubsub.subscription.num_unacked_messages_by_region{subscription_id:student-reindex,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query5",
                                            "query": "sum:gcp.pubsub.subscription.num_unacked_messages_by_region{subscription_id:admin-reindex,$region,$source} by {project_id}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Unacked Messages",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 1740594738170924
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gcp.pubsub.subscription.oldest_unacked_message_age_by_region{subscription_id:posting-reindex,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gcp.pubsub.subscription.oldest_unacked_message_age_by_region{subscription_id:employer-reindex-green,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:gcp.pubsub.subscription.oldest_unacked_message_age_by_region{subscription_id:university-reindex,$region,$source} by {project_id}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:gcp.pubsub.subscription.oldest_unacked_message_age_by_region{subscription_id:student-reindex,$region,$source} by {project_id}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Oldest Unacked Message",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4713595055435148
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.deadlock{$region,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.university_pubsub_reindexer.deadlock{$region,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_pubsub_reindexer.deadlock{$region,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.student_pubsub_reindexer.deadlock{$region,$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Deadlocks",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 2430845896005436
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.publish_changes_to_pubsub.count{$env,$region,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Publish to Pubsub",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3164920174181461
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.database_tick_missing{$env,$region,$source,$cluster} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Document Updater: Database Tick Missing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5600525430951390
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:handshake.streaming_updater.updated{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,index,env,region,cluster_deployment}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Streaming Update Count",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 2642736512275464
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.database_tick_missing{$env,$region,$cluster} by {env,region,cluster}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator: Database Tick Missing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4002776144367358
                    }
                ]
            },
            "id": 5678203292026498
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Document Update Upserts",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {cluster}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Cluster",
                            "type": "timeseries"
                        },
                        "id": 3539121136618242
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {priority}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Priority",
                            "type": "timeseries"
                        },
                        "id": 6496259358854024
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {priority,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Priority and Index",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 2620861226933350
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Index",
                            "type": "timeseries"
                        },
                        "id": 2346105514132730
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Source",
                            "type": "timeseries"
                        },
                        "id": 6891882600814252
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {source,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Source and Index",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3877525363356954
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.document_updater.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {source,priority,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Source, Priority, and Index",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 603211380303660
                    }
                ]
            },
            "id": 1404237679433522
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Document Update Queue Sizes",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.document_update.count{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.document_update.count.high{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.document_update.count.medium{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.document_update.count.low{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.document_update.count.very_low{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "DocumentUpdate Count (queue) by Priority",
                            "type": "timeseries"
                        },
                        "id": 1876951946394812
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "y = 0",
                                    "value": "y = 0"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "diff(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:handshake.elasticsearch_indexer.document_update.count{$cluster,$env,$region,$cluster_deployment,$index,$source} by {cluster,env,region,cluster_deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "DocumentUpdate Count (Queue) Rate of Change",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4973913738849630
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gcp.cloudsql.database.cpu.utilization{database_id:handshake-production:handshake-brave-mayfly}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gcp.cloudsql.database.cpu.utilization{database_id:handshake-uk-production:handshake-funky-wombat}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Production Primary DB CPU",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2121204165737918
                    }
                ]
            },
            "id": 4665378251378986
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Update By Query",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.update_by_query_creator.upserted{$cluster,$priority,$index,$env,$region,$cluster_deployment,$source} by {source,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Upserted by Source and Index",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4824691723059608
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.update_by_query_item.count.has_items{$env,$cluster,$index,$region,$cluster_deployment,$source} by {index,cluster,env,cluster_deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Update By Query Items Queue",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3680607295055632
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "diff(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.update_by_query_item.count.has_items{$cluster,$env,$region,$cluster_deployment,$source} by {env,cluster,cluster_deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Rate of Change of Update By Query Items",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 786067708246188
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.update_by_query.completed.awaiting_cleanup{$cluster,$env,$region,$cluster_deployment,$source} by {cluster,env,region,cluster_deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Update By Query Records Awaiting Cleanup",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6313859478989140
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.conflicted{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,env,index,cluster_deployment}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches with Conflicts",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 722129868806626
                    }
                ]
            },
            "id": 4579559704045056
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Indexing Delays",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "\u00a01 seconds",
                                    "value": "y = 1000"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.total.avg{$cluster,$env,priority:high,$region,$cluster_deployment,$source}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.total.median{$cluster,$env,priority:high,$region,$cluster_deployment,$source}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.total.95percentile{$cluster,$env,priority:high,$region,$cluster_deployment,$source}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.total.max{$cluster,$env,priority:high,$region,$cluster_deployment,$source}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "High Priority Total Delays",
                            "type": "timeseries"
                        },
                        "id": 6077257034011490
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "\u00a010 seconds\u00a0",
                                    "value": "y = 10000"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.total.avg{$cluster,$priority,$env,$region,$cluster_deployment,$source} by {priority}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Average Total Delay by Priority",
                            "type": "timeseries"
                        },
                        "id": 4553556429086110
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "value": "y = 10"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.queued.avg{$cluster,$priority,$env,$region,$cluster_deployment,$source} by {priority}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Avg Queued Time by Priority",
                            "type": "timeseries"
                        },
                        "id": 1640528620435162
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.delay.worker.avg{$cluster,$priority,$env,$region,$cluster_deployment,$source} by {priority}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Avg Batch Wait Time by Priority",
                            "type": "timeseries"
                        },
                        "id": 7164823490562224
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        },
                                        {
                                            "formula": "query5"
                                        },
                                        {
                                            "formula": "query6"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.high{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.medium{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.low{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query5",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.very_low{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query6",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.no_priority{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Queued WorkerBatch Priority Count",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 7734796251016442
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.document_update{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.index_creation{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.queued.update_by_query{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Queued WorkerBatch Type Count",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5255502626574456
                    }
                ]
            },
            "id": 2397065109681660
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Index Creations",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "area",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:handshake.elasticsearch_indexer.index_creation.count.not_finished{$cluster,$env,$index,$region,$cluster_deployment,$source} by {env,cluster,index,region}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Not Finished Index Creations",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 8732671515413906
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.index_creation_item.count.not_finished{$cluster,$env,$index,$region,$cluster_deployment,$source} by {env,cluster,index,region}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Not Finished Index Creation Items",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6266229883551794
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "diff(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.index_creation_item.count.not_finished{$cluster,$env,$index,$region,$cluster_deployment,$source} by {env,index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Rate of Change of Index Creation Items",
                            "type": "timeseries"
                        },
                        "id": 2741332273978748
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:gcp.cloudsql.database.cpu.utilization{database_id:handshake-production:handshake-mighty-shrew}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:gcp.cloudsql.database.cpu.utilization{database_id:handshake-uk-production:handshake-suited-arachnid}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Production Index Creation Replica DB CPU",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 4931547779138706
                    }
                ]
            },
            "id": 7256038100975838
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Worker Batches",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_batch.created{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches Created by Index",
                            "type": "timeseries"
                        },
                        "id": 1523939223593284
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.count.in_progress{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Active WorkerBatch Count",
                            "type": "timeseries"
                        },
                        "id": 1591082344442140
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_batch.created{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,batchtype}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches Created",
                            "type": "timeseries"
                        },
                        "id": 8015596788010172
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_batch_items.created{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches Items Created by Index",
                            "type": "timeseries"
                        },
                        "id": 143100590473064
                    },
                    {
                        "definition": {
                            "events": [
                                {
                                    "q": "tags:\"release-stage:staging\" \"New Release\" source:bugsnag",
                                    "tags_execution": "and"
                                }
                            ],
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_batch.failed.awaiting_restart{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_batch.abandoned.awaiting_restart{$cluster,$env,$region,$cluster_deployment,$source} by {cluster}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches Awaiting Restart",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3995215275223650
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_batch.finished.awaiting_cleanup{$cluster,$env,$region,$cluster_deployment,$source} by {cluster,env,region,cluster_deployment}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Batches Awaiting Cleanup",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4796618790878874
                    },
                    {
                        "definition": {
                            "background_color": "white",
                            "content": "## Workers and Worker Batches\n\nThe main purpose of the workers is to execute batches of indexing work generated by the orchestrator deployment. Workers pull a batch of work from the queue, execute that batch of work, and repeat. These batches of work are represented by records in a Postgres table and are kept around for n days, which is configurable via an ENV. This gives us an audit log of what work is done when, which is useful for debugging. Since all indexing to our product team clusters is done by this deployment the autoscaler configuration determines the load we put on our clusters.\n\nIf we want to index data into Elasticsearch faster we can simply increase the maximum pods in this deployment. It is important to monitor how this impacts the main database's CPU to ensure it does not cause a high DB incident. \n\nSimilarly, if the cluster is under too much load from indexing we can reduce the maximum pods in this deployment. ",
                            "font_size": "14",
                            "has_padding": true,
                            "show_tick": false,
                            "text_align": "left",
                            "tick_edge": "left",
                            "tick_pos": "50%",
                            "type": "note",
                            "vertical_align": "top"
                        },
                        "id": 3960818399945936
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.empty_worker_batch_items_attributes{$env,$region,$cluster} by {env,region,cluster,batch_type,index_class_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Attempt to Insert Empty Worker Batch Item Data",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5203751148662220
                    }
                ]
            },
            "id": 7195171992164644
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Worker Futures (Threads)",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.finished{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.failed{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.failed{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Future Finished vs. Failed",
                            "type": "timeseries"
                        },
                        "id": 5281339048040972
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.start{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Future Started by Cluster / Index",
                            "type": "timeseries"
                        },
                        "id": 6045429578702564
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.finished{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,index}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Future Finished",
                            "type": "timeseries"
                        },
                        "id": 5755022754902456
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker.threads.all_active{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker.threads.full_increase{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker.threads.partial_increase{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker.threads.missed_increase{$cluster,$index,$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Thread Status Per Loop",
                            "type": "timeseries"
                        },
                        "id": 4495257405122766
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_future.serialization_timing.avg{$env,$region,$cluster_deployment,$source,$cluster,$index} by {index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Serialization Avg Timing by Index",
                            "type": "timeseries"
                        },
                        "id": 3696432273967052
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_future.serialization_timing.95percentile{$env,$region,$cluster_deployment,$source,$cluster,$index} by {index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Serialization P95 Timing by Index",
                            "type": "timeseries"
                        },
                        "id": 5194793228667898
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.serialization_timing.avg{$env,$region,$cluster_deployment,$source,$cluster,$index} by {index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Serialization Summed Timing by Index",
                            "type": "timeseries"
                        },
                        "id": 3997773525134
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "ewma_3(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_future.serialization_sql_queries{$region,$cluster_deployment,$source,$env,$cluster,$index} by {index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Serialization Average Query Count by Index",
                            "type": "timeseries"
                        },
                        "id": 6277118977679242
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.elasticsearch_indexer.worker_future.conflicted_records{$cluster,$index,$env,$region,$cluster_deployment,$source} by {cluster,env,index,region,cluster_deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Conflicted  Record Counts by Index",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 7211173574090216
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_future.not_found_records{$cluster,$index,$env,$region,$source} by {cluster,env,region,index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Not Found Errors by Index",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5539601063508596
                    }
                ]
            },
            "id": 1069988995097354
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "University APM",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:trace.ElasticsearchIndexerGorchestrator.hits{$env,resource_name:*critical-loop,$region,$cluster_deployment,$source,service:elasticsearch-indexer-gorchestrator-universities}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerOrchestrator.errors{$env,resource_name:critical-loop,service:handshake-elasticsearch-indexer-orchestrator-universities,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loops / Errors",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 1057596043397036
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:*critical_loop}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:document-update-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:update-by-query-critical-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:document-update-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:update-by-query-critical-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query3"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:document-update-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:update-by-query-critical-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 2033667440649048
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.ElasticsearchIndexerOrchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,service:handshake-elasticsearch-indexer-orchestrator-universities,$source,$region}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-universities}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerOrchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,service:handshake-elasticsearch-indexer-orchestrator-universities,$source,$region}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-universities}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.ElasticsearchIndexerOrchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,service:handshake-elasticsearch-indexer-orchestrator-universities,$source,$region}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-universities}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.ElasticsearchIndexerOrchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,service:handshake-elasticsearch-indexer-orchestrator-universities,$source,$region}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-universities}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Non-Critical Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 955617602477954
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.hits{$env,service:handshake-elasticsearch-indexer-worker-universities,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.errors{$env,service:handshake-elasticsearch-indexer-worker-universities,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Loops / Errors",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5139687001349058
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-universities,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-universities,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-universities,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4645228471290612
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:kubernetes_state.deployment.replicas{deployment:handshake-universities-elasticsearch-worker,$region,$cluster_deployment} by {cluster-name,deployment}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,deployment:handshake-universities-elasticsearch-worker-index-creation} by {cluster-name,deployment}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,deployment:handshake-universities-elasticsearch-worker-low-priority} by {cluster-name,deployment}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,deployment:handshake-universities-elasticsearch-worker-ubq} by {cluster-name,deployment}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Replica Count by Cluster",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 8313009094766856
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Index Creation Measurement Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 325148233707198
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "\u00a0Autoscaler Target\u00a0",
                                    "value": "y = 20"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:docker.cpu.usage{kube_deployment:handshake-universities-elasticsearch-worker,$region,$cluster_deployment} by {cluster-name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Docker CPU by Cluster",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 487374521752730
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-universities,$source}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Worker Batch Timing",
                            "type": "query_value"
                        },
                        "id": 1726703627912756
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-universities,resource_name:document-update-critical-loop}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Orchestrator Critical Loop Timing",
                            "type": "query_value"
                        },
                        "id": 8547690390789194
                    }
                ]
            },
            "id": 4355300928732036
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Employer APM",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerGorchestrator.hits{$env,resource_name:*critical-loop,$region,$cluster_deployment,$source,service:elasticsearch-indexer-gorchestrator-employers}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loops / Errors",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 2140676636100376
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5839421572428668
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Non-Critical Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5319000408392428
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-employers,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-employers,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-employers,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,$source,$region,service:elasticsearch-indexer-gorchestrator-employers,resource_name:index-creation-measurement-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Index Creation Measurement Loop Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6375831654267038
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.hits{$env,service:handshake-elasticsearch-indexer-worker-employers,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.errors{$env,service:handshake-elasticsearch-indexer-worker-employers,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Loops / Errors",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6653806613033296
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-employers,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-employers,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,service:handshake-elasticsearch-indexer-worker-employers,$source} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Timing",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 7294077974777464
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,kube_deployment:handshake-employers-elasticsearch-worker-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-employers-elasticsearch-worker-ubq-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-employers-elasticsearch-worker-index-creation-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-employers-elasticsearch-worker-low-priority-green} by {cluster-name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Replica Count by Cluster",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 1055439587127446
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "\u00a0Autoscaler Target\u00a0",
                                    "value": "y = 20"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:docker.cpu.usage{kube_deployment:handshake-employers-elasticsearch-worker-green,$region,$cluster_deployment,$source} by {cluster-name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Docker CPU by Cluster",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4415399041110494
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "area",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p95:trace.ElasticsearchIndexerOrchestrator{$cluster_deployment,$region,env:production,service:handshake-elasticsearch-indexer-orchestrator-employers,$source,$env,resource_name:critical-loop}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$region,env:production,$source,$env,service:elasticsearch-indexer-gorchestrator-employers,resource_name:critical-loop}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "ElasticsearchIndexOrchestrator - duration and potential lock contention",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6406081281140378
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-employers}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Orchestrator Critical Loop Timing",
                            "type": "query_value"
                        },
                        "id": 7522624243551892
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,$source,service:handshake-elasticsearch-indexer-worker-employers}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Worker Batch Timing",
                            "type": "query_value"
                        },
                        "id": 8450254477976234
                    }
                ]
            },
            "id": 478361781105250
        },
        {
            "definition": {
                "layout_type": "ordered",
                "title": "Student APM",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:trace.ElasticsearchIndexerGorchestrator.hits{$env,resource_name:*critical-loop,$region,$cluster_deployment,$source,service:elasticsearch-indexer-gorchestrator-students}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loops And Errors",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 8134091469872836
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Critical Loop Timing",
                            "type": "timeseries"
                        },
                        "id": 3948056796659400
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p90:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p95:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,$cluster,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p75:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:non-critical-loop,$source,$region,$cluster,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Orchestrator Non-Critical Loop Timing",
                            "type": "timeseries"
                        },
                        "id": 2666882611902200
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.hits{$env,service:handshake-elasticsearch-indexer-worker-students,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.ElasticsearchIndexerWorkerFuture.errors{$env,service:handshake-elasticsearch-indexer-worker-students,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Loops / Errors",
                            "type": "timeseries"
                        },
                        "id": 3937537174209538
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p50:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,service:handshake-elasticsearch-indexer-worker-students,$source,$region} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p75:trace.elasticsearch.query{$cluster_deployment,$env,service:handshake-elasticsearch-indexer-worker-students,$source,$region} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "p90:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,service:handshake-elasticsearch-indexer-worker-students,$source,$region} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Timing",
                            "type": "timeseries"
                        },
                        "id": 1362561404084602
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        },
                                        {
                                            "formula": "query2"
                                        },
                                        {
                                            "formula": "query3"
                                        },
                                        {
                                            "formula": "query4"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-students-elasticsearch-worker-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-students-elasticsearch-worker-ubq-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-students-elasticsearch-worker-low-priority-green} by {cluster-name}"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "avg:kubernetes_state.deployment.replicas{$region,$cluster_deployment,$source,deployment:handshake-students-elasticsearch-worker-index-creation-green} by {cluster-name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Replica Count by Cluster",
                            "type": "timeseries"
                        },
                        "id": 7185830387045864
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "info dashed",
                                    "label": "\u00a0Autoscaler Target\u00a0",
                                    "value": "y = 20"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:docker.cpu.usage{$region,$cluster_deployment,$source,kube_deployment:handshake-students-elasticsearch-worker-green} by {cluster-name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Worker Docker CPU by Cluster",
                            "type": "timeseries"
                        },
                        "id": 4168014142200160
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "alias": "Monolith Messages",
                                            "formula": "query1"
                                        },
                                        {
                                            "alias": "Identity Messages",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "Total Messages",
                                            "formula": "query3"
                                        },
                                        {
                                            "alias": "Skipped Messages",
                                            "formula": "query4"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.student_reindexer.handle_message.count{$env,$region,$cluster_deployment,$source,origin:monolith}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:handshake.student_reindexer.handle_message.count{$env,$region,$cluster_deployment,$source,origin:identity}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "sum:handshake.student_reindexer.handle_message.count{$env,$region,$cluster_deployment,$source}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "sum:handshake.student_reindexer.handle_message.skipped.count{$env,$region,$cluster_deployment,$source}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Handled Messages By Origin",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 7786172911029640
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:trace.ElasticsearchIndexerGorchestrator{$cluster_deployment,$env,resource_name:*critical-loop,$source,$region,service:elasticsearch-indexer-gorchestrator-students}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Orchestrator Critical Loop Timing",
                            "type": "query_value"
                        },
                        "id": 7125710117408168
                    },
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:trace.ElasticsearchIndexerWorkerFuture{$cluster_deployment,$env,$region,$source,service:handshake-elasticsearch-indexer-worker-students}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Avg Worker Batch Timing",
                            "type": "query_value"
                        },
                        "id": 546934691907480
                    }
                ]
            },
            "id": 852266908308254
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Indexing Errors",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.deadlock{$cluster,$env,$region}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "time": {},
                            "title": "Elasticsearch Indexer Deadlocks",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2602110530777454
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.network_failure{$cluster,$env,$region}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "time": {},
                            "title": "Elasticsearch Indexer Network Failures",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 1003267299741582
                    }
                ]
            },
            "id": 1177772056318122
        }
    ]
}