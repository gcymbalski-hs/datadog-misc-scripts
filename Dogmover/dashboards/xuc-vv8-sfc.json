{
    "author_handle": "lydia@joinhandshake.com",
    "author_name": "Lydia Nash",
    "created_at": "2021-01-14T15:22:09.156929+00:00",
    "description": "## Title\n\nDescribe this dashboard. Add links to other dashboards, monitors, wikis,  and docs to help your teammates. Markdown is supported.\n\n- [This might link to a dashboard](#)\n- [This might link to a wiki](#)",
    "id": "xuc-vv8-sfc",
    "is_read_only": false,
    "layout_type": "ordered",
    "modified_at": "2022-08-24T17:26:41.733518+00:00",
    "notify_list": [],
    "reflow_type": "auto",
    "restricted_roles": [],
    "template_variables": [
        {
            "available_values": [],
            "default": "*",
            "name": "env",
            "prefix": "env"
        },
        {
            "available_values": [],
            "default": "*",
            "name": "region",
            "prefix": "region"
        },
        {
            "available_values": [],
            "default": "edu_jobs_platform",
            "name": "squad",
            "prefix": "@squad"
        }
    ],
    "title": "EDU Jobs Platform",
    "url": "/dashboard/xuc-vv8-sfc/edu-jobs-platform",
    "widgets": [
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Employer Stats",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_stats.successful_batch_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Successfully processed batches",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 3651608098746002
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "alias": "Lock Timeout",
                                            "formula": "query1"
                                        },
                                        {
                                            "alias": "Other Error \ud83e\udd37\u200d\u2642\ufe0f",
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_stats.lock_wait_timeout_count{$env,$region} by {env,region}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:handshake.employer_stats.other_error_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Unsuccessful batches",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 5210832322086612
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.employer_stats.ingest_timing.avg{$env,$region} by {env,region}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Total run time for ingest job",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 421884476575970
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Successful Batches",
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_stats.successful_batch_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "week_before(autosmooth(query0))"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "sum:handshake.employer_stats.successful_batch_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dotted",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Successful Batches (+ week before)",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 3430704448789348
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Errors ",
                                            "formula": "default_zero(query1 + query2)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_stats.lock_wait_timeout_count{$env,$region} by {env,region}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:handshake.employer_stats.other_error_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Errors Week Before",
                                            "formula": "default_zero(week_before(query0) + week_before(query1))"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "sum:handshake.employer_stats.lock_wait_timeout_count{$env,$region} by {env,region}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.employer_stats.other_error_count{$env,$region} by {env,region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dotted",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Batch Errors (+ week before)",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 5717408076086458
                    }
                ]
            },
            "id": 2314033295292298
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "SSO",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.hits{resource:c66f38143eef2863,service:handshake,$env,$region} by {region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.errors{resource:c66f38143eef2863,service:handshake,$env,$region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "warm"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "LDAP Total Number of Requests",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 513322319794606
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [
                                {
                                    "display_type": "error bold",
                                    "label": "\u00a0Mass Request Timeouts Possible\u00a0",
                                    "value": "y = 20"
                                }
                            ],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "(query1 / query2)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.hits{service:handshake,resource_name:sessionscontroller_backgrounded_auth_poll,$env,$region} by {region}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:trace.rack.request.hits{service:handshake,resource_name:sessionscontroller_backgrounded_auth_finish,$env,$region} by {region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "LDAP Average Request Wait Time",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5494305224992848
                    },
                    {
                        "definition": {
                            "legend_layout": "auto",
                            "legend_size": "0",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.backgrounded_auth_finish.return_message_blank{*}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "LDAP Timeouts",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 8798006869280256
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.login.attempt{$env,$region} by {auth_type}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Login Attempts by Auth Type",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 762175717310840
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "alias": "Error Rate %",
                                            "formula": "(query4 / query3) * 100"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "sum:handshake.cas.ticket_validation_failure{$env,$region}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "sum:handshake.login.attempt{$env,$region,auth_type:cas}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "CAS Login Error Rate % (Errors/Attempts)",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 1161600541783326
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.cas.ticket_validation_failure{$env,$region}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "CAS Validation Failures",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5296376108324888
                    }
                ]
            },
            "id": 8386308345877852
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Endpoints",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "has_search_bar": "always",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "HITS",
                                            "formula": "query1",
                                            "limit": {
                                                "count": 50,
                                                "order": "desc"
                                            }
                                        },
                                        {
                                            "alias": "P50",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "P75",
                                            "formula": "query3"
                                        },
                                        {
                                            "alias": "P90",
                                            "formula": "query4"
                                        },
                                        {
                                            "alias": "P95",
                                            "formula": "query5"
                                        },
                                        {
                                            "alias": "P99",
                                            "formula": "query6"
                                        },
                                        {
                                            "alias": "[TBD] TOTAL TIME SPENT",
                                            "formula": "0"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.hits{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}.as_count()"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "p50:trace.rack.request{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "p75:trace.rack.request{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query4",
                                            "query": "p90:trace.rack.request{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query5",
                                            "query": "p95:trace.rack.request{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query6",
                                            "query": "p99:trace.rack.request{env:production,region:us-central1,service:handshake,resource_name:next::edu::*} by {resource_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "[WEB] Endpoints Hits and Latency",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 7959994971821584
                    },
                    {
                        "definition": {
                            "has_search_bar": "always",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "Hits",
                                            "formula": "query7",
                                            "limit": {
                                                "count": 1000,
                                                "order": "desc"
                                            }
                                        },
                                        {
                                            "alias": "P75",
                                            "formula": "query1"
                                        },
                                        {
                                            "alias": "P90",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "[TBD] TOTAL TIME SPENT",
                                            "formula": "0"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "compute": {
                                                "aggregation": "count"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "resource_name",
                                                    "limit": 1000,
                                                    "sort": {
                                                        "aggregation": "count",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "trace-search"
                                            ],
                                            "name": "query7",
                                            "search": {
                                                "query": "operation_name:rack.request service:handshake env:production $squad"
                                            }
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "pc75",
                                                "metric": "@duration"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "resource_name",
                                                    "limit": 1000,
                                                    "sort": {
                                                        "aggregation": "pc75",
                                                        "metric": "@duration",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "trace-search"
                                            ],
                                            "name": "query1",
                                            "search": {
                                                "query": "operation_name:rack.request service:handshake env:production $squad"
                                            }
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "pc90",
                                                "metric": "@duration"
                                            },
                                            "data_source": "spans",
                                            "group_by": [
                                                {
                                                    "facet": "resource_name",
                                                    "limit": 1000,
                                                    "sort": {
                                                        "aggregation": "pc90",
                                                        "metric": "@duration",
                                                        "order": "desc"
                                                    }
                                                }
                                            ],
                                            "indexes": [
                                                "trace-search"
                                            ],
                                            "name": "query2",
                                            "search": {
                                                "query": "operation_name:rack.request service:handshake env:production $squad"
                                            }
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "[WEB] Endpoints Hits and Latency - Jobs Platform",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 6641054854840768
                    },
                    {
                        "definition": {
                            "has_search_bar": "always",
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "Min DB Calls",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "max DB calls",
                                            "formula": "query1",
                                            "limit": {
                                                "count": 500,
                                                "order": "desc"
                                            }
                                        },
                                        {
                                            "alias": "avg DB calls",
                                            "formula": "query3"
                                        },
                                        {
                                            "alias": "Max-Min Diff",
                                            "formula": "query1 - query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "min:handshake.edu.controllers.query_count{region:us-central1,env:production,$squad} by {action,controller}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "max:handshake.edu.controllers.query_count{region:us-central1,env:production,$squad} by {action,controller}"
                                        },
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query3",
                                            "query": "avg:handshake.edu.controllers.query_count{region:us-central1,env:production,$squad} by {action,controller}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "[WEB] Database Queries **Per Request** by Endpoint",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_table"
                        },
                        "id": 8723511770097618
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "palette": "white_on_red",
                                            "value": 2
                                        },
                                        {
                                            "comparator": ">",
                                            "palette": "white_on_yellow",
                                            "value": 0.75
                                        },
                                        {
                                            "comparator": "<=",
                                            "palette": "white_on_green",
                                            "value": 0.75
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 500,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:trace.rack.request{service:handshake,resource_name:next::edu*,env:production,$region} by {resource_name}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "[WEB] Slowest Average Response Times by Endpoint",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 4012021305233102
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "formula": "query1 + query2",
                                            "limit": {
                                                "count": 500,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.hits{service:handshake,resource_name:next::edu*,env:production,$region} by {resource_name}.as_count()"
                                        },
                                        {
                                            "compute": {
                                                "aggregation": "count"
                                            },
                                            "data_source": "spans",
                                            "group_by": [],
                                            "indexes": [
                                                "trace-search"
                                            ],
                                            "name": "query2",
                                            "search": {
                                                "query": "@squad:edu_jobs_platform"
                                            }
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "[WEB] Endpoints Sorted by Most Hits",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 3171182049003392
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.elasticsearch_indexer.worker_future.serialization_sql_queries{$region,env:production,cluster:universities} by {index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "[ELASTICSEARCH] Serialization Average Query Count by Index",
                            "type": "timeseries"
                        },
                        "id": 6499632857688574
                    }
                ]
            },
            "id": 7710390743722936
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Sidekiq",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:trace.sidekiq.job.duration{project:handshake-production,service:handshake-sidekiq} by {resource_name}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": false,
                            "title": "Sidekiq Jobs By Duration",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2908315114630322
                    }
                ]
            },
            "id": 2981511559024492
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "Database Tables",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "max:postgresql.dead_rows{*,$region,*,*} by {table}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Dead Rows by Table",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3533953956018914
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "max:postgresql.live_rows{*,$region,*,*} by {table}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Live Rows by Table",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3237499806256878
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "avg:postgresql.seq_scans{*,$region,*,*} by {table}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Seq Scans by Table",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4174875445249056
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "horizontal",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Current",
                                            "formula": "query1"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:postgresql.seq_scans{*,$region,*,*}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "palette": "green"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Previous Week",
                                            "formula": "week_before(query1)"
                                        }
                                    ],
                                    "on_right_yaxis": false,
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:postgresql.seq_scans{*,$region,*,*}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dashed",
                                        "palette": "grey"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Sequential scans vs. week before",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 6352035133575662
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:postgresql.index_scans{*,$region,*,*} by {table}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Index Scans by Table",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 7361401441160698
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query2"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:postgresql.index_scans{*,$region,*,*} by {table,index}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Index Scans by Table and Index Name",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 3059291115071276
                    }
                ]
            },
            "id": 4983103741355460
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "CSV Generation",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.csv.generate_data.avg{*} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "handshake.csv.generate_data.avg",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 1932432310581328
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "markers": [],
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.csv.generate_data.95percentile{type:employerapproval} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 5311727892174998
                    }
                ]
            },
            "id": 2353406660556212
        },
        {
            "definition": {
                "layout_type": "ordered",
                "show_title": true,
                "title": "NOT CURRENTLY LIVE: Job Auto Approvals",
                "type": "group",
                "widgets": [
                    {
                        "definition": {
                            "autoscale": true,
                            "precision": 2,
                            "requests": [
                                {
                                    "formulas": [
                                        {
                                            "alias": "Total Auto Approved",
                                            "formula": "query2 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:handshake.posting_auto_approve_service.total_schools_processed{$env}.as_count()"
                                        },
                                        {
                                            "aggregator": "sum",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.posting_auto_approve_service.postings_rejected{$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Total Auto Approved - Number not accurate until post-launch",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "query_value"
                        },
                        "id": 8964617411676676
                    },
                    {
                        "definition": {
                            "requests": [
                                {
                                    "conditional_formats": [
                                        {
                                            "comparator": ">",
                                            "palette": "white_on_red",
                                            "value": 2
                                        },
                                        {
                                            "comparator": ">",
                                            "palette": "white_on_yellow",
                                            "value": 0.75
                                        },
                                        {
                                            "comparator": "<=",
                                            "palette": "white_on_green",
                                            "value": 0.75
                                        }
                                    ],
                                    "formulas": [
                                        {
                                            "formula": "query1",
                                            "limit": {
                                                "count": 500,
                                                "order": "desc"
                                            }
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "aggregator": "avg",
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:trace.rack.request{service:handshake,resource_name:next::edu::autoapprovalsettingscontroller*,$env,$region}"
                                        }
                                    ],
                                    "response_format": "scalar"
                                }
                            ],
                            "title": "Response times - Auto Approve Job Settings",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "toplist"
                        },
                        "id": 2015089455607770
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Throughput",
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.rack.request.hits{resource_name:next::edu::autoapprovalsettingscontroller*,$env} by {resource_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Last week",
                                            "formula": "week_before(query0)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "sum:trace.rack.request.hits{resource_name:next::edu::autoapprovalsettingscontroller*,$env} by {resource_name}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dotted",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "time": {},
                            "title": "Hits",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 6028447265398636
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Average Time",
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "avg:handshake.posting_auto_approve_service.calculate_approvals.avg{$env} by {env}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Average completion time (in MS) for PostingAutoApprovedService",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": false
                            }
                        },
                        "id": 7911392182049250
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "DistributeJobPostings - Worker",
                                            "formula": "autosmooth(query1)"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:trace.sidekiq.job.duration{$env,resource_name:distributejobpostings}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                },
                                {
                                    "display_type": "line",
                                    "formulas": [
                                        {
                                            "alias": "Last Week - DistributeJobPostings",
                                            "formula": "autosmooth(week_before(query0))"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query0",
                                            "query": "sum:trace.sidekiq.job.duration{$env,resource_name:distributejobpostings}"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "dotted",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "time": {},
                            "title": "Job Postings Worker Total Time",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries",
                            "yaxis": {
                                "include_zero": true,
                                "label": "",
                                "max": "auto",
                                "min": "auto",
                                "scale": "linear"
                            }
                        },
                        "id": 4851782839989880
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "alias": "Total Rejected",
                                            "formula": "query1"
                                        },
                                        {
                                            "alias": "Total Schools Processed",
                                            "formula": "query2"
                                        },
                                        {
                                            "alias": "Total Auto Approved",
                                            "formula": "query2 - query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.posting_auto_approve_service.postings_rejected{$env}.as_count()"
                                        },
                                        {
                                            "data_source": "metrics",
                                            "name": "query2",
                                            "query": "sum:handshake.posting_auto_approve_service.total_schools_processed{$env}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Total Schools Process vs Total Auto Approved",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 1149339419583674
                    },
                    {
                        "definition": {
                            "legend_columns": [
                                "avg",
                                "min",
                                "max",
                                "value",
                                "sum"
                            ],
                            "legend_layout": "auto",
                            "requests": [
                                {
                                    "display_type": "bars",
                                    "formulas": [
                                        {
                                            "formula": "query1"
                                        }
                                    ],
                                    "queries": [
                                        {
                                            "data_source": "metrics",
                                            "name": "query1",
                                            "query": "sum:handshake.posting_auto_approve_service.auto_approve_rejections{$env} by {rejected_by}.as_count()"
                                        }
                                    ],
                                    "response_format": "timeseries",
                                    "style": {
                                        "line_type": "solid",
                                        "line_width": "normal",
                                        "palette": "dog_classic"
                                    }
                                }
                            ],
                            "show_legend": true,
                            "title": "Job Rejected by Reason",
                            "title_align": "left",
                            "title_size": "16",
                            "type": "timeseries"
                        },
                        "id": 2992764846924554
                    }
                ]
            },
            "id": 7839563045516936
        }
    ]
}